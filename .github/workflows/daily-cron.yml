name: Backend cron

on:
  schedule:
    - cron: "*/5 * * * *"   # or whatever you'll use on main later
  workflow_dispatch:        # ðŸ‘ˆ this is what lets you test on a branch

jobs:
  call-backend:
    runs-on: ubuntu-latest
    env:
      CRON_API_KEY: ${{ secrets.CRON_API_KEY }}
    steps:
      - name: Call daily job endpoint
        run: |
          curl -X POST "https://tryastro.onrender.com/" \
            -H "X-Cron-Secret: $CRON_API_KEY" \
            -sSf || echo "Request failed"
